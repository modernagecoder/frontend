<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Mobile Nav Test</title>
    
    <!-- Load CSS in the same order as main site -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/mobile-nav-fix.css">
    <link rel="stylesheet" href="/css/mobile-nav-final-fix.css">
    
    <style>
        body {
            margin: 0;
            padding-top: 80px;
            background: #1a1a2e;
            color: white;
            font-family: Arial, sans-serif;
        }
        
        .debug-overlay {
            position: fixed;
            top: 80px;
            left: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.95);
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.8rem;
            z-index: 10001;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            border: 2px solid #a855f7;
        }
        
        .test-content {
            padding: 2rem;
            margin-top: 320px;
        }
        
        .nav-item-debug {
            border: 1px solid rgba(255, 255, 0, 0.5) !important;
            background: rgba(255, 255, 0, 0.1) !important;
        }
        
        .courses-debug {
            border: 3px solid red !important;
            background: rgba(255, 0, 0, 0.2) !important;
        }
        
        .debug-button {
            background: #a855f7;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.25rem;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <div class="debug-overlay">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <strong>üîç Mobile Navigation Debug Panel</strong>
            <button onclick="toggleDebugPanel()" class="debug-button">Hide</button>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
            <div>
                <div>Screen: <span id="screenWidth">-</span>px</div>
                <div>Mobile: <span id="isMobile">-</span></div>
                <div>Menu Open: <span id="menuOpen">-</span></div>
            </div>
            <div>
                <div>Nav Items: <span id="navItemCount">-</span></div>
                <div>Courses Found: <span id="coursesFound">-</span></div>
                <div>Courses Visible: <span id="coursesVisible">-</span></div>
            </div>
            <div>
                <div>CSS Loaded: <span id="cssLoaded">-</span></div>
                <div>JS Loaded: <span id="jsLoaded">-</span></div>
                <div>Errors: <span id="errorCount">0</span></div>
            </div>
        </div>
        
        <div style="margin-bottom: 1rem;">
            <button onclick="highlightNavItems()" class="debug-button">Highlight Items</button>
            <button onclick="forceCoursesVisible()" class="debug-button">Force Courses</button>
            <button onclick="logFullAnalysis()" class="debug-button">Full Analysis</button>
            <button onclick="testDropdown()" class="debug-button">Test Dropdown</button>
        </div>
        
        <div id="debugLog" style="background: rgba(0, 0, 0, 0.5); padding: 0.5rem; border-radius: 4px; max-height: 100px; overflow-y: auto; font-size: 0.7rem;">
            <div>Debug log will appear here...</div>
        </div>
    </div>

    <header>
        <nav>
            <div class="navbar">
                <div class="nav-container">
                    <a href="index.html" class="logo">
                        <span class="logo-text">Modern Age Coders</span>
                    </a>
                    <ul class="nav-menu" id="navMenu">
                        <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                        <li class="nav-item dropdown" id="coursesDropdown">
                            <a href="course.html" class="nav-link" id="coursesLink">Courses
                                <svg style="width: 14px; height: 14px; margin-left: 4px; opacity: 0.7;"
                                    fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                        d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                        clip-rule="evenodd" />
                                </svg>
                            </a>
                            <div class="dropdown-content">
                                <a href="course.html" class="dropdown-item"
                                    style="font-weight: bold; border-bottom: 1px solid rgba(168, 85, 247, 0.3); margin-bottom: 0.5rem; padding-bottom: 0.75rem;">üìö
                                    View All Courses</a>
                                <a href="course.html?tab=coding&subtab=kids" class="dropdown-item">For Kids (Ages
                                    6-12)</a>
                                <a href="course.html?tab=coding&subtab=teens" class="dropdown-item">For Teens (Ages
                                    13-18)</a>
                                <a href="course.html?tab=coding&subtab=college" class="dropdown-item">For College
                                    Students</a>
                                <a href="course.html?tab=coding&subtab=college" class="dropdown-item">For
                                    Professionals</a>
                                <a href="course.html?tab=coding&subtab=customized" class="dropdown-item">Customized
                                    Training</a>
                                <a href="course.html?tab=coding&subtab=girls" class="dropdown-item highlight">Special
                                    For Girls</a>
                            </div>
                        </li>
                        <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
                        <li class="nav-item"><a href="/content/blog/generated/index.html" class="nav-link">Blog</a></li>
                        <li class="nav-item"><a href="#faq" class="nav-link">FAQ</a></li>
                        <li class="nav-item"><a href="#contact" class="nav-link">Contact</a></li>
                        <li class="nav-item">
                            <a href="login.html" class="nav-link login-btn">Login</a>
                        </li>
                        <li class="nav-item" style="margin-left: 10px;"><a href="course.html" class="cta-button">Start
                                Learning</a></li>
                    </ul>

                    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle Menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <main class="test-content">
        <h1>Comprehensive Mobile Navigation Test</h1>
        
        <div style="background: rgba(255, 255, 255, 0.1); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
            <h2>üß™ Test Instructions</h2>
            <ol>
                <li><strong>Resize browser</strong> to mobile width (‚â§900px)</li>
                <li><strong>Open hamburger menu</strong> by clicking the three lines</li>
                <li><strong>Look for "Courses"</strong> in the navigation menu</li>
                <li><strong>Use debug panel</strong> above to analyze the issue</li>
                <li><strong>Try the debug buttons</strong> to force visibility</li>
            </ol>
        </div>
        
        <div style="background: rgba(255, 0, 0, 0.1); padding: 1.5rem; border-radius: 8px;">
            <h2>üö® If Courses is Still Missing</h2>
            <p>Use the debug panel above to:</p>
            <ul>
                <li>Click "Highlight Items" to see all navigation items</li>
                <li>Click "Force Courses" to make it visible</li>
                <li>Click "Full Analysis" to log detailed information</li>
                <li>Check the debug log for error messages</li>
            </ul>
        </div>
    </main>

    <!-- Load JavaScript -->
    <script src="/js/mobile-nav-comprehensive-fix.js"></script>
    
    <script>
        let errorCount = 0;
        let debugPanelVisible = true;
        
        // Capture errors
        window.addEventListener('error', function(e) {
            errorCount++;
            logToDebug(`ERROR: ${e.message}`);
            updateDebugInfo();
        });
        
        function logToDebug(message) {
            const debugLog = document.getElementById('debugLog');
            const timestamp = new Date().toLocaleTimeString();
            debugLog.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            debugLog.scrollTop = debugLog.scrollHeight;
        }
        
        function updateDebugInfo() {
            const menu = document.getElementById('navMenu');
            const coursesDropdown = document.getElementById('coursesDropdown');
            const coursesLink = document.getElementById('coursesLink');
            const navItems = document.querySelectorAll('.nav-item');
            
            document.getElementById('screenWidth').textContent = window.innerWidth;
            document.getElementById('isMobile').textContent = window.innerWidth <= 900 ? 'Yes' : 'No';
            document.getElementById('menuOpen').textContent = menu && menu.classList.contains('active') ? 'Yes' : 'No';
            document.getElementById('navItemCount').textContent = navItems.length;
            document.getElementById('coursesFound').textContent = coursesDropdown ? 'Yes' : 'No';
            document.getElementById('errorCount').textContent = errorCount;
            
            // Check CSS loading
            const testElement = document.createElement('div');
            testElement.className = 'mobile-menu-btn';
            document.body.appendChild(testElement);
            const cssLoaded = window.getComputedStyle(testElement).display !== 'inline';
            document.body.removeChild(testElement);
            document.getElementById('cssLoaded').textContent = cssLoaded ? 'Yes' : 'No';
            
            // Check JS loading
            document.getElementById('jsLoaded').textContent = window.MobileNavDebug ? 'Yes' : 'No';
            
            // Check courses visibility
            if (coursesDropdown) {
                const style = window.getComputedStyle(coursesDropdown);
                const isVisible = style.display !== 'none' && style.visibility !== 'hidden' && style.opacity !== '0';
                document.getElementById('coursesVisible').textContent = isVisible ? 'Yes' : 'No';
            } else {
                document.getElementById('coursesVisible').textContent = 'N/A';
            }
        }
        
        function toggleDebugPanel() {
            const panel = document.querySelector('.debug-overlay');
            debugPanelVisible = !debugPanelVisible;
            panel.style.display = debugPanelVisible ? 'block' : 'none';
        }
        
        function highlightNavItems() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((item, index) => {
                item.classList.add('nav-item-debug');
                const link = item.querySelector('.nav-link');
                if (link && link.textContent.includes('Courses')) {
                    item.classList.add('courses-debug');
                }
            });
            logToDebug(`Highlighted ${navItems.length} navigation items`);
        }
        
        function forceCoursesVisible() {
            const coursesDropdown = document.getElementById('coursesDropdown');
            const coursesLink = document.getElementById('coursesLink');
            
            if (coursesDropdown) {
                // Force visibility with inline styles
                coursesDropdown.style.display = 'block';
                coursesDropdown.style.visibility = 'visible';
                coursesDropdown.style.opacity = '1';
                coursesDropdown.style.position = 'relative';
                coursesDropdown.style.transform = 'none';
                coursesDropdown.style.height = 'auto';
                coursesDropdown.style.width = '100%';
                coursesDropdown.classList.add('courses-debug');
                
                if (coursesLink) {
                    coursesLink.style.display = 'flex';
                    coursesLink.style.visibility = 'visible';
                    coursesLink.style.opacity = '1';
                }
                
                logToDebug('Forced Courses dropdown to be visible');
            } else {
                logToDebug('ERROR: Courses dropdown element not found!');
            }
            
            updateDebugInfo();
        }
        
        function logFullAnalysis() {
            console.log('=== FULL MOBILE NAVIGATION ANALYSIS ===');
            
            const analysis = {
                viewport: {
                    width: window.innerWidth,
                    height: window.innerHeight,
                    isMobile: window.innerWidth <= 900
                },
                elements: {
                    menu: document.getElementById('navMenu'),
                    mobileBtn: document.getElementById('mobileMenuBtn'),
                    coursesDropdown: document.getElementById('coursesDropdown'),
                    coursesLink: document.getElementById('coursesLink'),
                    allNavItems: document.querySelectorAll('.nav-item')
                },
                styles: {},
                errors: errorCount
            };
            
            // Analyze styles
            if (analysis.elements.coursesDropdown) {
                const style = window.getComputedStyle(analysis.elements.coursesDropdown);
                analysis.styles.coursesDropdown = {
                    display: style.display,
                    visibility: style.visibility,
                    opacity: style.opacity,
                    position: style.position,
                    transform: style.transform,
                    height: style.height,
                    width: style.width,
                    overflow: style.overflow
                };
            }
            
            console.log('Analysis:', analysis);
            logToDebug('Full analysis logged to console');
        }
        
        function testDropdown() {
            const coursesDropdown = document.getElementById('coursesDropdown');
            if (coursesDropdown) {
                coursesDropdown.classList.toggle('active');
                logToDebug('Toggled dropdown active class');
            } else {
                logToDebug('ERROR: Cannot test dropdown - element not found');
            }
        }
        
        // Update debug info regularly
        setInterval(updateDebugInfo, 2000);
        window.addEventListener('resize', updateDebugInfo);
        
        // Monitor menu state changes
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    const isOpen = mutation.target.classList.contains('active');
                    logToDebug(`Menu ${isOpen ? 'opened' : 'closed'}`);
                    updateDebugInfo();
                }
            });
        });
        
        const menu = document.getElementById('navMenu');
        if (menu) {
            observer.observe(menu, {
                attributes: true,
                attributeFilter: ['class']
            });
        }
        
        // Initial update
        setTimeout(() => {
            updateDebugInfo();
            logToDebug('Debug panel initialized');
        }, 500);
    </script>
</body>
</html>