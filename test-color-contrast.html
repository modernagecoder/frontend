<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Contrast Testing Tool - Modern Age Coders</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #000002;
            color: #F8FAFC;
            line-height: 1.6;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #333;
            border-radius: 8px;
            background: rgba(16, 16, 28, 0.8);
        }
        
        .contrast-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .pass-aa {
            background: rgba(78, 205, 196, 0.2);
            border: 1px solid rgba(78, 205, 196, 0.5);
            color: #4ECDC4;
        }
        
        .pass-aaa {
            background: rgba(78, 205, 196, 0.3);
            border: 2px solid rgba(78, 205, 196, 0.7);
            color: #4ECDC4;
        }
        
        .fail {
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid rgba(255, 107, 107, 0.5);
            color: #FF6B6B;
        }
        
        .warning {
            background: rgba(255, 165, 0, 0.2);
            border: 1px solid rgba(255, 165, 0, 0.5);
            color: #FFA500;
        }
        
        button {
            background: linear-gradient(135deg, #8A2BE2, #4A00E0);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 16px;
            font-weight: 600;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(168, 85, 247, 0.3);
        }
        
        button:focus-visible {
            outline: 3px solid rgba(168, 85, 247, 0.9);
            outline-offset: 3px;
        }
        
        .color-picker-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .color-input-group {
            background: rgba(24, 24, 40, 0.9);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.12);
        }
        
        .color-input-group h4 {
            margin: 0 0 15px 0;
            color: #A855F7;
        }
        
        .color-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        
        .color-input input[type="color"] {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .color-input input[type="text"] {
            background: rgba(8, 8, 16, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #F8FAFC;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            flex: 1;
        }
        
        .preview-section {
            background: rgba(24, 24, 40, 0.9);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            margin: 20px 0;
        }
        
        .contrast-preview {
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .contrast-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .contrast-metric {
            background: rgba(8, 8, 16, 0.9);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .contrast-metric .value {
            font-size: 24px;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .contrast-metric .label {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .wcag-standards {
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .wcag-standards h4 {
            margin: 0 0 15px 0;
            color: #A855F7;
        }
        
        .wcag-standards ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .wcag-standards li {
            margin: 8px 0;
        }
        
        .test-results {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            background: rgba(8, 8, 16, 0.9);
        }
        
        .element-result {
            padding: 10px;
            margin: 8px 0;
            border-radius: 4px;
            border-left: 4px solid;
            font-size: 14px;
        }
        
        .element-result.pass {
            border-left-color: #4ECDC4;
            background: rgba(78, 205, 196, 0.1);
        }
        
        .element-result.fail {
            border-left-color: #FF6B6B;
            background: rgba(255, 107, 107, 0.1);
        }
        
        .element-result .element-info {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .element-result .contrast-ratio {
            font-family: monospace;
            font-size: 12px;
            opacity: 0.8;
        }
        
        .common-colors {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .color-swatch {
            padding: 10px;
            border-radius: 4px;
            text-align: center;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.2s ease;
        }
        
        .color-swatch:hover {
            transform: scale(1.05);
        }
        
        .score-display {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .score-excellent {
            background: rgba(78, 205, 196, 0.2);
            border: 2px solid rgba(78, 205, 196, 0.5);
            color: #4ECDC4;
        }
        
        .score-good {
            background: rgba(255, 165, 0, 0.2);
            border: 2px solid rgba(255, 165, 0, 0.5);
            color: #FFA500;
        }
        
        .score-poor {
            background: rgba(255, 107, 107, 0.2);
            border: 2px solid rgba(255, 107, 107, 0.5);
            color: #FF6B6B;
        }
    </style>
</head>
<body>
    <h1>🎨 Color Contrast Testing Tool</h1>
    
    <div class="wcag-standards">
        <h4>📋 WCAG Contrast Standards</h4>
        <ul>
            <li><strong>WCAG AA Normal Text:</strong> 4.5:1 minimum contrast ratio</li>
            <li><strong>WCAG AA Large Text:</strong> 3.0:1 minimum contrast ratio (18pt+ or bold 14pt+)</li>
            <li><strong>WCAG AAA Normal Text:</strong> 7.0:1 minimum contrast ratio</li>
            <li><strong>WCAG AAA Large Text:</strong> 4.5:1 minimum contrast ratio</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>🔧 Manual Color Testing</h2>
        <p>Test specific color combinations for WCAG compliance:</p>
        
        <div class="color-picker-section">
            <div class="color-input-group">
                <h4>Text Color</h4>
                <div class="color-input">
                    <input type="color" id="textColorPicker" value="#F8FAFC">
                    <input type="text" id="textColorInput" value="#F8FAFC" placeholder="#000000">
                </div>
                <h5>Common Text Colors:</h5>
                <div class="common-colors">
                    <div class="color-swatch" style="background: #000000; color: #FFFFFF;" onclick="setTextColor('#000000')">Black<br>#000000</div>
                    <div class="color-swatch" style="background: #FFFFFF; color: #000000;" onclick="setTextColor('#FFFFFF')">White<br>#FFFFFF</div>
                    <div class="color-swatch" style="background: #F8FAFC; color: #000000;" onclick="setTextColor('#F8FAFC')">Light Gray<br>#F8FAFC</div>
                    <div class="color-swatch" style="background: #CBD5E1; color: #000000;" onclick="setTextColor('#CBD5E1')">Gray<br>#CBD5E1</div>
                    <div class="color-swatch" style="background: #94A3B8; color: #FFFFFF;" onclick="setTextColor('#94A3B8')">Dark Gray<br>#94A3B8</div>
                </div>
            </div>
            
            <div class="color-input-group">
                <h4>Background Color</h4>
                <div class="color-input">
                    <input type="color" id="bgColorPicker" value="#000002">
                    <input type="text" id="bgColorInput" value="#000002" placeholder="#FFFFFF">
                </div>
                <h5>Common Background Colors:</h5>
                <div class="common-colors">
                    <div class="color-swatch" style="background: #000002; color: #FFFFFF;" onclick="setBgColor('#000002')">Black<br>#000002</div>
                    <div class="color-swatch" style="background: #FFFFFF; color: #000000;" onclick="setBgColor('#FFFFFF')">White<br>#FFFFFF</div>
                    <div class="color-swatch" style="background: rgba(16, 16, 28, 0.8); color: #FFFFFF;" onclick="setBgColor('#101C1C')">Dark Theme<br>#101C1C</div>
                    <div class="color-swatch" style="background: rgba(168, 85, 247, 0.1); color: #FFFFFF;" onclick="setBgColor('#A855F7')">Purple<br>#A855F7</div>
                    <div class="color-swatch" style="background: rgba(78, 205, 196, 0.1); color: #000000;" onclick="setBgColor('#4ECDC4')">Teal<br>#4ECDC4</div>
                </div>
            </div>
        </div>
        
        <div class="preview-section">
            <h4>🎯 Contrast Preview</h4>
            <div class="contrast-preview" id="contrastPreview">
                Sample text with current color combination
            </div>
            
            <div class="contrast-info">
                <div class="contrast-metric">
                    <div class="value" id="contrastRatio">21.0:1</div>
                    <div class="label">Contrast Ratio</div>
                </div>
                <div class="contrast-metric">
                    <div class="value" id="wcagAA">✅ PASS</div>
                    <div class="label">WCAG AA</div>
                </div>
                <div class="contrast-metric">
                    <div class="value" id="wcagAAA">✅ PASS</div>
                    <div class="label">WCAG AAA</div>
                </div>
                <div class="contrast-metric">
                    <div class="value" id="largeText">✅ PASS</div>
                    <div class="label">Large Text</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>🔍 Automated Page Testing</h2>
        <p>Test all text elements on the current page for WCAG compliance:</p>
        
        <button onclick="runPageContrastTest()">Test Current Page</button>
        <button onclick="testWebsitePages()">Test All Website Pages</button>
        <button onclick="clearTestResults()">Clear Results</button>
        
        <div id="scoreDisplay" style="display: none;"></div>
        <div id="testResults" class="test-results" style="display: none;"></div>
    </div>
    
    <div class="test-section">
        <h2>🎨 Website Color Palette Test</h2>
        <p>Test the website's color combinations used in CSS:</p>
        
        <button onclick="testWebsiteColors()">Test Website Color Palette</button>
        
        <div id="paletteResults" style="display: none;"></div>
    </div>

    <script src="scripts/color-contrast-test.js"></script>
    <script>
        let currentTextColor = '#F8FAFC';
        let currentBgColor = '#000002';
        
        // Initialize color pickers
        document.addEventListener('DOMContentLoaded', function() {
            const textColorPicker = document.getElementById('textColorPicker');
            const textColorInput = document.getElementById('textColorInput');
            const bgColorPicker = document.getElementById('bgColorPicker');
            const bgColorInput = document.getElementById('bgColorInput');
            
            // Sync color picker with text input
            textColorPicker.addEventListener('change', function() {
                textColorInput.value = this.value;
                currentTextColor = this.value;
                updatePreview();
            });
            
            textColorInput.addEventListener('input', function() {
                if (isValidColor(this.value)) {
                    textColorPicker.value = this.value;
                    currentTextColor = this.value;
                    updatePreview();
                }
            });
            
            bgColorPicker.addEventListener('change', function() {
                bgColorInput.value = this.value;
                currentBgColor = this.value;
                updatePreview();
            });
            
            bgColorInput.addEventListener('input', function() {
                if (isValidColor(this.value)) {
                    bgColorPicker.value = this.value;
                    currentBgColor = this.value;
                    updatePreview();
                }
            });
            
            // Initial preview update
            updatePreview();
        });
        
        function isValidColor(color) {
            return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color);
        }
        
        function setTextColor(color) {
            currentTextColor = color;
            document.getElementById('textColorPicker').value = color;
            document.getElementById('textColorInput').value = color;
            updatePreview();
        }
        
        function setBgColor(color) {
            currentBgColor = color;
            document.getElementById('bgColorPicker').value = color;
            document.getElementById('bgColorInput').value = color;
            updatePreview();
        }
        
        function updatePreview() {
            const preview = document.getElementById('contrastPreview');
            preview.style.color = currentTextColor;
            preview.style.backgroundColor = currentBgColor;
            
            // Calculate contrast
            if (window.ColorContrastTester) {
                const tester = new ColorContrastTester();
                const result = tester.testColorCombination(currentTextColor, currentBgColor);
                
                // Update metrics
                document.getElementById('contrastRatio').textContent = result.contrast.toFixed(2) + ':1';
                
                // Update WCAG AA
                const aaElement = document.getElementById('wcagAA');
                aaElement.textContent = result.passesAA ? '✅ PASS' : '❌ FAIL';
                aaElement.style.color = result.passesAA ? '#4ECDC4' : '#FF6B6B';
                
                // Update WCAG AAA
                const aaaElement = document.getElementById('wcagAAA');
                aaaElement.textContent = result.passesAAA ? '✅ PASS' : '❌ FAIL';
                aaaElement.style.color = result.passesAAA ? '#4ECDC4' : '#FF6B6B';
                
                // Update Large Text
                const largeTextPasses = result.contrast >= 3.0;
                const largeElement = document.getElementById('largeText');
                largeElement.textContent = largeTextPasses ? '✅ PASS' : '❌ FAIL';
                largeElement.style.color = largeTextPasses ? '#4ECDC4' : '#FF6B6B';
            }
        }
        
        async function runPageContrastTest() {
            const resultsDiv = document.getElementById('testResults');
            const scoreDiv = document.getElementById('scoreDisplay');
            
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = '<p>🔄 Testing page color contrast...</p>';
            scoreDiv.style.display = 'none';
            
            try {
                const tester = new ColorContrastTester();
                const results = await tester.runAllTests();
                
                displayContrastResults(results);
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="contrast-result fail">
                    <strong>Error:</strong> ${error.message}
                </div>`;
            }
        }
        
        function displayContrastResults(results) {
            const resultsDiv = document.getElementById('testResults');
            const scoreDiv = document.getElementById('scoreDisplay');
            
            // Display score
            const scoreClass = results.score >= 95 ? 'score-excellent' : 
                              results.score >= 90 ? 'score-good' : 'score-poor';
            
            const scoreEmoji = results.score >= 95 ? '🏆' : 
                              results.score >= 90 ? '👍' : '⚠️';
            
            scoreDiv.innerHTML = `
                <div class="${scoreClass}">
                    ${scoreEmoji} Contrast Score: ${results.score}%<br>
                    <small>${results.passed} passed, ${results.failed} failed out of ${results.total} elements</small>
                </div>
            `;
            scoreDiv.style.display = 'block';
            
            // Display detailed results
            let html = `<h3>📊 Detailed Results (${results.total} elements tested)</h3>`;
            
            // Show failed elements first
            if (results.failedElements.length > 0) {
                html += '<h4>❌ Failed Elements (Need Attention):</h4>';
                results.failedElements.forEach(result => {
                    html += `<div class="element-result fail">
                        <div class="element-info">${result.element}</div>
                        <div class="contrast-ratio">
                            Contrast: ${result.contrast.toFixed(2)}:1 (needs ${result.threshold}:1)<br>
                            Colors: ${result.textColor} on ${result.backgroundColor}<br>
                            Text: "${result.text}"
                        </div>
                    </div>`;
                });
            }
            
            // Show passed elements (limited to first 10)
            const passedElements = results.results.filter(r => r.passes).slice(0, 10);
            if (passedElements.length > 0) {
                html += '<h4>✅ Passed Elements (Sample):</h4>';
                passedElements.forEach(result => {
                    html += `<div class="element-result pass">
                        <div class="element-info">${result.element} - ${result.wcagLevel}</div>
                        <div class="contrast-ratio">
                            Contrast: ${result.contrast.toFixed(2)}:1<br>
                            Text: "${result.text}"
                        </div>
                    </div>`;
                });
                
                if (results.passed > 10) {
                    html += `<p><em>... and ${results.passed - 10} more passed elements</em></p>`;
                }
            }
            
            resultsDiv.innerHTML = html;
        }
        
        async function testWebsitePages() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = '<p>🔄 Testing multiple pages... This feature requires navigation to each page.</p>';
            
            // For now, just test current page
            await runPageContrastTest();
        }
        
        function testWebsiteColors() {
            const paletteDiv = document.getElementById('paletteResults');
            paletteDiv.style.display = 'block';
            
            // Test common website color combinations
            const websiteColors = [
                { text: '#F8FAFC', bg: '#000002', name: 'Primary Text on Dark Background' },
                { text: '#CBD5E1', bg: '#000002', name: 'Secondary Text on Dark Background' },
                { text: '#94A3B8', bg: '#000002', name: 'Muted Text on Dark Background' },
                { text: '#FFFFFF', bg: '#8A2BE2', name: 'White Text on Purple Button' },
                { text: '#FFFFFF', bg: '#4A00E0', name: 'White Text on Dark Purple Button' },
                { text: '#000000', bg: '#FFD700', name: 'Black Text on Gold Button' },
                { text: '#FFFFFF', bg: '#EC4899', name: 'White Text on Pink Button' },
                { text: '#F8FAFC', bg: 'rgba(16, 16, 28, 0.8)', name: 'Text on Glass Background' }
            ];
            
            let html = '<h3>🎨 Website Color Palette Test Results</h3>';
            
            if (window.ColorContrastTester) {
                const tester = new ColorContrastTester();
                
                websiteColors.forEach(colorCombo => {
                    const result = tester.testColorCombination(colorCombo.text, colorCombo.bg);
                    const statusClass = result.passesAA ? 'pass-aa' : 'fail';
                    const statusText = result.passesAAA ? 'AAA' : result.passesAA ? 'AA' : 'FAIL';
                    const emoji = result.passesAA ? '✅' : '❌';
                    
                    html += `<div class="contrast-result ${statusClass}">
                        <div>
                            <strong>${colorCombo.name}</strong><br>
                            <small>${colorCombo.text} on ${colorCombo.bg}</small>
                        </div>
                        <div>
                            ${emoji} ${result.contrast.toFixed(2)}:1 (${statusText})
                        </div>
                    </div>`;
                });
            }
            
            paletteDiv.innerHTML = html;
        }
        
        function clearTestResults() {
            document.getElementById('testResults').style.display = 'none';
            document.getElementById('scoreDisplay').style.display = 'none';
            document.getElementById('paletteResults').style.display = 'none';
        }
    </script>
</body>
</html>