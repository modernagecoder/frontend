<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Modern Age Coders</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Explore our latest articles on coding, programming, and technology education for all ages. Learn from expert insights and tutorials.">
    <meta name="keywords"
        content="coding blog, programming tutorials, technology education, STEM learning, web development, software engineering">
    <meta name="author" content="Modern Age Coders">
    <link rel="canonical" href="https://learn.modernagecoders.com/blog">
    <link rel="alternate" hreflang="en-in" href="https://learn.modernagecoders.com/blog" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="apple-touch-icon" href="/favicon/favicon-32x32.png">

    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://learn.modernagecoders.com/blog">
    <meta property="og:title" content="Blog - Modern Age Coders">
    <meta property="og:description"
        content="Explore our latest articles on coding, programming, and technology education for all ages.">
    <meta property="og:image" content="https://placehold.co/1200x630/8A2BE2/FFFFFF?text=Modern+Age+Coders+Blog">

    <!-- Twitter Card Meta Tags -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://learn.modernagecoders.com/blog">
    <meta property="twitter:title" content="Blog - Modern Age Coders">
    <meta property="twitter:description"
        content="Explore our latest articles on coding, programming, and technology education for all ages.">
    <meta property="twitter:image" content="https://placehold.co/1200x600/8A2BE2/FFFFFF?text=Modern+Age+Coders+Blog">

    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/blog-styles.css">
    <!-- CRITICAL: Load this last to override all mobile nav conflicts -->
    <link rel="stylesheet" href="/css/mobile-nav-final-fix.css">

    <!-- Mobile Blog Fixes - Inline CSS with !important to override existing styles -->
    <style>
        /* Fix hamburger menu button cropping on mobile */
        @media (max-width: 768px) {
            .mobile-menu-btn {
                min-width: 44px !important;
                min-height: 44px !important;
                width: 44px !important;
                height: 44px !important;
                padding: 8px !important;
                margin-right: 5px !important;
                overflow: visible !important;
                flex-shrink: 0 !important;
            }

            .mobile-menu-btn span {
                width: 24px !important;
                height: 3px !important;
                display: block !important;
            }

            .nav-container {
                padding-right: 10px !important;
                overflow: visible !important;
            }

            .navbar {
                overflow: visible !important;
            }
        }
    </style>
</head>

<body class="blog-listing-page">

    <canvas id="background-canvas"></canvas>

    <!-- ============================================ -->
    <!-- NAVIGATION COMPONENT                         -->
    <!-- Loaded from: /components/nav.html            -->
    <!-- ============================================ -->
    <div id="nav-placeholder"></div>

    <main>

        <!-- Hero Section -->
        <section class="blog-listing-hero section">
            <div class="blog-listing-hero-content">
                <h1>Our Blog</h1>
                <p>Insights, tutorials, and stories about coding and technology education</p>
            </div>
        </section>

        <!-- Featured Post Section -->
        {{FEATURED_POST}}

        <!-- Search & Filter Toolbar -->
        {{SEARCH_AND_FILTERS}}

        <!-- Blog Grid -->
        <section class="blog-listing-section section">
            <div class="blog-grid" id="blog-grid">
                {{BLOG_CARDS}}
            </div>
            <div id="blog-no-results" class="blog-no-results" style="display:none;">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8" />
                    <line x1="21" y1="21" x2="16.65" y2="16.65" />
                    <line x1="8" y1="11" x2="14" y2="11" />
                </svg>
                <h3>No articles found</h3>
                <p>Try adjusting your search or category filter</p>
            </div>
        </section>

    </main>

    <!-- ============================================ -->
    <!-- FOOTER COMPONENT                             -->
    <!-- Loaded from: /components/footer.html         -->
    <!-- ============================================ -->
    <div id="footer-placeholder"></div>

    <!-- ============================================ -->
    <!-- CALLBACK MODAL SCRIPT - Must load first      -->
    <!-- ============================================ -->
    <script src="/js/callback-modal.js"></script>

    <!-- ============================================ -->
    <!-- COMPONENT LOADER SCRIPT                      -->
    <!-- Loads navigation and footer components       -->
    <!-- MUST BE LOADED BEFORE OTHER SCRIPTS          -->
    <!-- ============================================ -->
    <script src="/js/components-loader.js"></script>

    <!-- ============================================ -->
    <!-- MOBILE NAVIGATION SCRIPT                     -->
    <!-- Handles hamburger menu functionality         -->
    <!-- ============================================ -->
    <script src="/js/mobile-navigation.js"></script>

    <script src="/js/navigation.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // ===== Blog Card Click Navigation =====
            const blogCards = document.querySelectorAll('.blog-card[data-blog-url]');
            blogCards.forEach(card => {
                card.style.cursor = 'pointer';
                card.addEventListener('click', function (e) {
                    if (e.target.tagName === 'A' || e.target.tagName === 'BUTTON' ||
                        e.target.closest('a') || e.target.closest('button')) {
                        return;
                    }
                    const blogUrl = this.getAttribute('data-blog-url');
                    if (blogUrl) {
                        window.location.href = `/blog/${blogUrl}`;
                    }
                });
            });

            // ===== Search + Filter Logic =====
            const searchInput = document.getElementById('blog-search-input');
            const searchDropdown = document.getElementById('blog-search-dropdown');
            const blogGrid = document.getElementById('blog-grid');
            const noResults = document.getElementById('blog-no-results');
            const allCards = Array.from(blogGrid.querySelectorAll('.blog-card'));
            const categoryPills = document.querySelectorAll('.blog-category-pill');


            let activeCategory = 'all';

            // Build search index from cards
            const searchIndex = allCards.map(card => ({
                el: card,
                title: card.querySelector('.blog-card-title').textContent.toLowerCase(),
                excerpt: card.querySelector('.blog-card-excerpt').textContent.toLowerCase(),
                category: card.getAttribute('data-category'),
                url: card.getAttribute('data-blog-url')
            }));

            function filterCards() {
                const query = searchInput.value.trim().toLowerCase();
                let visibleCount = 0;

                allCards.forEach(card => {
                    const item = searchIndex.find(i => i.el === card);
                    const matchesCategory = activeCategory === 'all' || item.category === activeCategory;
                    const matchesSearch = !query || item.title.includes(query) || item.excerpt.includes(query);

                    if (matchesCategory && matchesSearch) {
                        card.style.display = '';
                        visibleCount++;
                    } else {
                        card.style.display = 'none';
                    }
                });

                noResults.style.display = visibleCount === 0 ? 'flex' : 'none';
            }

            // Search dropdown autocomplete
            function updateDropdown() {
                const query = searchInput.value.trim().toLowerCase();
                if (query.length < 2) {
                    searchDropdown.style.display = 'none';
                    searchDropdown.innerHTML = '';
                    return;
                }

                const matches = searchIndex
                    .filter(item => item.title.includes(query) || item.excerpt.includes(query))
                    .slice(0, 6);

                if (matches.length === 0) {
                    searchDropdown.innerHTML = '<div class="search-dropdown-empty">No articles match your search</div>';
                    searchDropdown.style.display = 'block';
                    return;
                }

                searchDropdown.innerHTML = matches.map(item => `
                    <a href="/blog/${item.url}" class="search-dropdown-item">
                        <span class="search-dropdown-title">${highlightMatch(escapeHtml(getOriginalTitle(item.el)), query)}</span>
                        <span class="search-dropdown-category">${item.category}</span>
                    </a>
                `).join('');
                searchDropdown.style.display = 'block';
            }

            function getOriginalTitle(card) {
                return card.querySelector('.blog-card-title').textContent;
            }

            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            function highlightMatch(text, query) {
                if (!query) return text;
                const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
                return text.replace(regex, '<mark class="search-highlight">$1</mark>');
            }

            // Search input events
            searchInput.addEventListener('input', () => {
                filterCards();
                updateDropdown();
            });

            // Close dropdown on click outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.blog-search-box')) {
                    searchDropdown.style.display = 'none';
                }
            });

            // Focus shows dropdown again if text exists
            searchInput.addEventListener('focus', () => {
                if (searchInput.value.trim().length >= 2) {
                    updateDropdown();
                }
            });

            // Category pill click
            function setActiveCategory(category, source) {
                activeCategory = category;

                // Update pills
                categoryPills.forEach(pill => {
                    pill.classList.toggle('active', pill.getAttribute('data-filter') === category);
                });

                filterCards();
            }

            categoryPills.forEach(pill => {
                pill.addEventListener('click', () => {
                    setActiveCategory(pill.getAttribute('data-filter'), 'pill');
                });
            });
        });
    </script>

    <!-- Mobile Navigation -->
    <script src="/js/unified-mobile-nav.js"></script>
</body>

</html>