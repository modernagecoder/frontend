# Netlify Configuration for Frontend

[build]
  # Generate blog and course content before deployment
  command = "npm install && npm run generate:all && npm run build:inline && cd lovewall && npm install && npm run build && cd .."
  publish = "."
  functions = "api"

# API Function redirects
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

# Redirect rules for clean URLs
[[redirects]]
  from = "/index.html"
  to = "/"
  status = 301
  force = true

[[redirects]]
  from = "/about.html"
  to = "/about"
  status = 301
  force = true

[[redirects]]
  from = "/course.html"
  to = "/courses"
  status = 301
  force = true

[[redirects]]
  from = "/pricing.html"
  to = "/pricing"
  status = 301
  force = true

[[redirects]]
  from = "/contact.html"
  to = "/contact"
  status = 301
  force = true

[[redirects]]
  from = "/faq.html"
  to = "/faq"
  status = 301
  force = true

[[redirects]]
  from = "/terms.html"
  to = "/terms"
  status = 301
  force = true

[[redirects]]
  from = "/privacy.html"
  to = "/privacy"
  status = 301
  force = true

[[redirects]]
  from = "/login.html"
  to = "/login"
  status = 301
  force = true

# Static asset redirects (must come before page redirects)
[[redirects]]
  from = "/css/*"
  to = "/src/css/:splat"
  status = 200

[[redirects]]
  from = "/js/*"
  to = "/src/js/:splat"
  status = 200

[[redirects]]
  from = "/images/*"
  to = "/public/images/:splat"
  status = 200

[[redirects]]
  from = "/favicon/*"
  to = "/public/favicon/:splat"
  status = 200

[[redirects]]
  from = "/favicon.ico"
  to = "/public/favicon/favicon.ico"
  status = 200

[[redirects]]
  from = "/admin/*"
  to = "/src/admin/:splat"
  status = 200

# Lovewall assets (built files)
[[redirects]]
  from = "/assets/*"
  to = "/lovewall/dist/assets/:splat"
  status = 200

# Rewrite rules for clean URLs
[[redirects]]
  from = "/"
  to = "/src/pages/index.html"
  status = 200

[[redirects]]
  from = "/about"
  to = "/src/pages/about.html"
  status = 200

[[redirects]]
  from = "/courses"
  to = "/src/pages/course.html"
  status = 200

[[redirects]]
  from = "/pricing"
  to = "/src/pages/pricing.html"
  status = 200

[[redirects]]
  from = "/contact"
  to = "/src/pages/contact.html"
  status = 200

[[redirects]]
  from = "/faq"
  to = "/src/pages/faq.html"
  status = 200

[[redirects]]
  from = "/terms"
  to = "/src/pages/terms.html"
  status = 200

[[redirects]]
  from = "/privacy"
  to = "/src/pages/privacy.html"
  status = 200

[[redirects]]
  from = "/login"
  to = "/src/pages/login.html"
  status = 200

[[redirects]]
  from = "/beat-the-babu"
  to = "/src/pages/beat-the-babu.html"
  status = 200

[[redirects]]
  from = "/business-solutions"
  to = "/src/pages/business-solutions.html"
  status = 200

[[redirects]]
  from = "/student-labs"
  to = "/src/pages/student-labs.html"
  status = 200

[[redirects]]
  from = "/coding-roadmap"
  to = "/src/pages/coding-roadmap.html"
  status = 200

[[redirects]]
  from = "/bootstrap"
  to = "/src/pages/bootstrap.html"
  status = 200

[[redirects]]
  from = "/search"
  to = "/src/pages/search.html"
  status = 200

# City Landing Pages - SEO Optimized
[[redirects]]
  from = "/best-coding-class-in-kolkata"
  to = "/src/pages/best-coding-class-in-kolkata.html"
  status = 200

[[redirects]]
  from = "/best-coding-class-in-hyderabad"
  to = "/src/pages/best-coding-class-in-hyderabad.html"
  status = 200

[[redirects]]
  from = "/best-coding-class-in-bengaluru"
  to = "/src/pages/best-coding-class-in-bengaluru.html"
  status = 200

[[redirects]]
  from = "/best-coding-class-in-pune"
  to = "/src/pages/best-coding-class-in-pune.html"
  status = 200



[[redirects]]
  from = "/love"
  to = "/lovewall/dist/index.html"
  status = 200

[[redirects]]
  from = "/summer-coding-camp"
  to = "/src/pages/summer-coding-camp.html"
  status = 200

[[redirects]]
  from = "/blog"
  to = "/content/blog/generated/index.html"
  status = 200

# Category pages - redirect .html to clean URLs
[[redirects]]
  from = "/category/kids.html"
  to = "/category/kids"
  status = 301
  force = true

[[redirects]]
  from = "/category/teens.html"
  to = "/category/teens"
  status = 301
  force = true

[[redirects]]
  from = "/category/college.html"
  to = "/category/college"
  status = 301
  force = true

[[redirects]]
  from = "/category/professionals.html"
  to = "/category/professionals"
  status = 301
  force = true

[[redirects]]
  from = "/category/corporate.html"
  to = "/category/corporate"
  status = 301
  force = true

# Category pages - clean URL rewrites
[[redirects]]
  from = "/category/kids"
  to = "/src/pages/category/kids.html"
  status = 200

[[redirects]]
  from = "/category/teens"
  to = "/src/pages/category/teens.html"
  status = 200

[[redirects]]
  from = "/category/college"
  to = "/src/pages/category/college.html"
  status = 200

[[redirects]]
  from = "/category/professionals"
  to = "/src/pages/category/professionals.html"
  status = 200

[[redirects]]
  from = "/category/corporate"
  to = "/src/pages/category/corporate.html"
  status = 200

# Course category URLs (must come before individual courses)
[[redirects]]
  from = "/courses/coding/*"
  to = "/src/pages/course.html"
  status = 200

[[redirects]]
  from = "/courses/mathematics/*"
  to = "/src/pages/course.html"
  status = 200

# Course static assets (CSS, JS, images)
[[redirects]]
  from = "/content/courses/generated/*"
  to = "/content/courses/generated/:splat"
  status = 200

# Trailing slash â†’ no trailing slash 301 redirects (SEO canonicalization)
[[redirects]]
  from = "/courses/:course/"
  to = "/courses/:course"
  status = 301
  force = true

[[redirects]]
  from = "/blog/:slug/"
  to = "/blog/:slug"
  status = 301
  force = true

# Blog posts (without trailing slash)
[[redirects]]
  from = "/blog/:slug"
  to = "/content/blog/generated/:slug/index.html"
  status = 200

# Course pages (without trailing slash)
[[redirects]]
  from = "/courses/:course"
  to = "/content/courses/generated/:course/index.html"
  status = 200

# 404 fallback
[[redirects]]
  from = "/*"
  to = "/src/pages/404.html"
  status = 404

# Security headers
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    X-XSS-Protection = "1; mode=block"
    Referrer-Policy = "strict-origin-when-cross-origin"

# Cache static assets
[[headers]]
  for = "/*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.jpg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.png"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.svg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.webp"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
